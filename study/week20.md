Week 20 (03/18 ~ 03/22)
===
>  ##### 주간 요약
>  중간 피드백을 받기 위한 발표 영상을 제출했다.  
>  Outlier 데이터를 걸러내는 알고리즘을 구현했다.  
>  유저들에 대한 clustering을 진행하고 결과를 분석했다.  

Day 89 (03/18)
---
오늘은 outlier를 걸러내는 작업을 진행했다.  
지난주에 각 interaction 마다 해당 게임의 playtime 분포를 바탕으로 z score를 계산하는 작업을 했다.  
이를 바탕으로 PM님이 z score가 비정상적으로 높은 데이터들을 살펴보셨고, 그 중 일부 유저들에게서 여러 게임의 playtime이 비슷하게 나타나는 걸 발견해 이런 패턴의 유저들을 이상 유저로 간주하자고 하셨다.  
그래서 이런 유저들을 걸러내기 위해 유저별 interaction을 playtime 순으로 정렬하고, 앞뒤 n개의 playtime이 i번째 playtime과 비슷한 값이면 이상 유저로 간주하고 배제했다.  
그리고 z score가 지나치게 높은 interaction들도 제거해보았다.  
z score가 높은 것만으로 비정상적인 interaction이라 간주할 수는 없지만, z score의 분포를 고려할 때 지나치게 큰 값들은 통계적으로 outlier로 간주할 수 있다고 판단했다.  
그 결과 제거된 interaction은 전체 데이터의 0.5% 정도밖에 안 되지만 추천 결과는 꽤 달라졌다.  
그간 실험에서 상위 12개로 추천되던 아이템들에 속하지 않는 처음 보는 아이템이 3개나 추천되었고, 나는 FPS를 하지 않음에도 배틀 그라운드가 계속 추천되었는데 이런 현상이 사라졌다.  

+ ##### 키워드: Outlier 제거

Day 90 (03/19)
---
어제 구현한 outlier 구분 알고리즘으로 걸러진 57명의 유저를 직접 확인하며 알고리즘을 신뢰할 수 있는지 확인했다.  
확인 결과 모든 유저가 비정상적 기록을 가진 유저로 확인되어, 해당 알고리즘을 채택하기로 결정됐다.  
그 외에 z score가 높은 값들을 제거하는 대신 정상 범위로 낮추고, playtime도 해당 z score에 대응되는 값으로 변경하도록 했다.  
이전에는 임의로 z score가 5보다 큰 값들에 대해 적용했는데, 회의 과정에서 95% 신뢰 기준에 대응되는 값인 1.96을 기준으로 삼는 것으로 결정했다.  

+ ##### 키워드: Outlier 알고리즘 검토, Z score outlier 표준화

Day 91 (03/20)
---
오늘은 최종 프로젝트 1차 영상 제출일이라 아침에 조원들과 발표자료를 만들었다.  
마감 시한이 빠듯해서 발표자료를 만들자마자 바로 발표 영상을 녹화 후 제출했다.  
따로 발표 연습 없이 자료를 전체적으로 훑고 발표를 시작했는데, 다행히 큰 문제 없이 발표를 마쳤다.  

오후에는 슬슬 최종 서비스에 들어갈 추가 기능들을 추려내고, 남은 기간동안 할 작업들을 정리했다.  
나는 유저 clustering과 데이터 전처리 및 모델 업데이트 자동화를 맡을 예정이다.  
다른 건 크게 문제가 없을 듯한데, clustering 후 각 cluster의 특성을 분석하는 과정이 좀 까다로울 것 같다.  
추후에 데이터가 업데이트 될 때마다 cluster의 centroid도 업데이트를 해야 할 텐데, 이 부분도 구체적으로 어떻게 처리할지 고민이 필요하다.  

+ ##### 키워드: 1차 발표 영상 제출, 최종 서비스 기획

Day 92 (03/21)
---
어제 계획했던 clustering 분석을 진행했다.  
clustering 자체는 금방 완료될 줄 알았는데, 예상보다 작업이 좀 지연됐다.  
가장 큰 문제는 각 유저를 나타내는 차원이 너무 많다는 것이다.  
한 유저당 대략 25000개의 게임에 대한 정보를 갖고, 약 60000명의 유저가 있기에 clustering에 꽤나 많은 시간이 소요된다.  
그리고 유저별로 각 게임에 대한 z score를 이용해 clustering을 시도했는데, inertia를 그래프로 분석했을 때 spike가 많이 나타났다.  
처음에는 데이터가 패턴화가 잘 되지 않거나, 차원이 너무 많은 게 문제인 줄 알았는데 나중에 생각해보니 코드에 오류가 있었다.  

그래도 z score 대신 playtime에 log scaling을 한 값은 inertia가 정상적으로 나타나서 우선은 이를 바탕으로 clustering을 진행할 계획이다.  
DBSCAN 방식도 시도해봤는데, 데이터 크기가 너무 커서 그런지 실행 과정에서 kill이 되었다.  

모델 구조는 현재 잠정적으로 fix가 된 상태인데, PM님이 친구들 데이터를 넣어봤을 때 결과가 좀 어색하다는 의견을 주셨다.  
외국계 게임의 추천도가 이상하게 높게 나타난다고 하는데, 일단은 현재 DB에 있는 외국 유저들의 데이터가 영향을 준 게 아닐까 싶어서 한국어 미지원 게임만 플레이 한 유저를 배제해 볼 예정이다.  

+ ##### 키워드: 유저 Clustering

Day 93 (03/22)
---
DB 정보를 최신화한 후 다시 clustering을 진행하고 결과를 분석해보았다.  
![image](https://github.com/Juniork725/boostcamp/assets/62535139/e8487200-4108-44c4-9379-6b9a090b7c7f)  
위 사진과 같이 clustering이 되었는데, 각 cluster의 유저들을 직접 살펴봤을 때 cluster의 성향이 뚜렷하게 드러나지 않는 느낌이 들었다.  
2차원 산점도에서 왼쪽 위는 cold start, 오른쪽 위는 배틀그라운드 플레이어, 왼쪽 아래는 카운터 스트라이크 2 플레이어, 오른쪽은 도타 2 플레이어 등으로 나뉜다.  
아마 상술한 3가지 게임이 interaction 수가 가장 많은 게임들이라서 유저들을 분류하는 주요 지표가 된 것 같다.  
하지만 clustering을 시도할 때 기대했던 결과는 전략 게임을 주로 하는 유저, FPS를 주로 하는 유저 등으로 clustering이 되는 것이었기에 이와는 맞지 않는 결과라 사용하지 않기로 했다.  
유저의 특징을 나타낼 때 "배틀 그라운드 유저", "도타 2 유저", "그 외" 등으로 분류하는 것은 서비스 이용자들의 기대와 맞지 않는다고 생각했기 때문이다.  

피어세션 때 이러한 분석 결과를 공유했고, 그 후에는 최종 발표까지의 일정을 정리했다.  
월요일까지 서비스 구현을 마치고, 화요일에 배포 후 CTR 및 사용자 평가 수집, 수요일에 발표 자료 제작 및 발표 영상 제출이 이뤄질 예정이다.  
서비스 배포 전 마지막 주말이기도 하고, 월요일까지 서비스를 완성하기로 해서 이번 주말에는 마무리 작업을 진행해야겠다.  

+ ##### 키워드: Clustering 결과 분석, 프로젝트 마무리 일정 계획
